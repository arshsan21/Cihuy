--[[
    AUTO SPAM CHAT - Craft A World Edition (Dengan Auto Detect Remote)
]]

-- Variable untuk spam
local spamActive = false
local spamThread = nil
local chatRemote = nil  -- Akan diisi otomatis nanti

-- Buat GUI
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "CraftAWorldSpam"
screenGui.Parent = game:GetService("CoreGui")
screenGui.ResetOnSpawn = false

-- Frame utama
local mainFrame = Instance.new("Frame")
mainFrame.Parent = screenGui
mainFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
mainFrame.BorderSizePixel = 2
mainFrame.BorderColor3 = Color3.fromRGB(255, 165, 0)  -- Warna orange khas Craft A World
mainFrame.Position = UDim2.new(0.7, 0, 0.3, 0)
mainFrame.Size = UDim2.new(0, 300, 0, 200)
mainFrame.Active = true
mainFrame.Draggable = true

-- Judul
local title = Instance.new("TextLabel")
title.Parent = mainFrame
title.BackgroundColor3 = Color3.fromRGB(35, 35, 35)
title.Size = UDim2.new(1, 0, 0, 35)
title.Font = Enum.Font.SourceSansBold
title.Text = "CRAFT A WORLD SPAM"
title.TextColor3 = Color3.fromRGB(255, 165, 0)
title.TextSize = 20

-- Label Status Remote
local remoteStatus = Instance.new("TextLabel")
remoteStatus.Parent = mainFrame
remoteStatus.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
remoteStatus.Position = UDim2.new(0, 10, 0, 40)
remoteStatus.Size = UDim2.new(0, 280, 0, 20)
remoteStatus.Font = Enum.Font.SourceSans
remoteStatus.Text = "üîç Mencari remote chat..."
remoteStatus.TextColor3 = Color3.fromRGB(255, 255, 0)
remoteStatus.TextSize = 14

-- Input pesan
local pesanBox = Instance.new("TextBox")
pesanBox.Parent = mainFrame
pesanBox.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
pesanBox.BorderSizePixel = 1
pesanBox.BorderColor3 = Color3.fromRGB(255, 165, 0)
pesanBox.Position = UDim2.new(0, 10, 0, 70)
pesanBox.Size = UDim2.new(0, 280, 0, 30)
pesanBox.Font = Enum.Font.SourceSans
pesanBox.PlaceholderText = "Teks yang mau dispam..."
pesanBox.Text = ""
pesanBox.TextColor3 = Color3.fromRGB(255, 255, 255)
pesanBox.TextSize = 16

-- Input delay
local delayBox = Instance.new("TextBox")
delayBox.Parent = mainFrame
delayBox.BackgroundColor3 = Color3.fromRGB(50, 50, 50)
delayBox.BorderSizePixel = 1
delayBox.BorderColor3 = Color3.fromRGB(255, 165, 0)
delayBox.Position = UDim2.new(0, 10, 0, 110)
delayBox.Size = UDim2.new(0, 130, 0, 30)
delayBox.Font = Enum.Font.SourceSans
delayBox.PlaceholderText = "Delay (detik)"
delayBox.Text = "1"
delayBox.TextColor3 = Color3.fromRGB(255, 255, 255)
delayBox.TextSize = 16

-- Status spam
local statusLabel = Instance.new("TextLabel")
statusLabel.Parent = mainFrame
statusLabel.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
statusLabel.Position = UDim2.new(0, 150, 0, 110)
statusLabel.Size = UDim2.new(0, 140, 0, 30)
statusLabel.Font = Enum.Font.SourceSans
statusLabel.Text = "Status: STOP"
statusLabel.TextColor3 = Color3.fromRGB(255, 100, 100)
statusLabel.TextSize = 16

-- Tombol RUN
local runBtn = Instance.new("TextButton")
runBtn.Parent = mainFrame
runBtn.BackgroundColor3 = Color3.fromRGB(0, 150, 0)
runBtn.Position = UDim2.new(0, 10, 0, 150)
runBtn.Size = UDim2.new(0, 135, 0, 35)
runBtn.Font = Enum.Font.SourceSansBold
runBtn.Text = "RUN"
runBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
runBtn.TextSize = 18

-- Tombol STOP
local stopBtn = Instance.new("TextButton")
stopBtn.Parent = mainFrame
stopBtn.BackgroundColor3 = Color3.fromRGB(150, 0, 0)
stopBtn.Position = UDim2.new(0, 155, 0, 150)
stopBtn.Size = UDim2.new(0, 135, 0, 35)
stopBtn.Font = Enum.Font.SourceSansBold
stopBtn.Text = "STOP"
stopBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
stopBtn.TextSize = 18

-- Tombol close
local closeBtn = Instance.new("TextButton")
closeBtn.Parent = mainFrame
closeBtn.BackgroundColor3 = Color3.fromRGB(200, 0, 0)
closeBtn.Position = UDim2.new(1, -25, 0, 5)
closeBtn.Size = UDim2.new(0, 20, 0, 20)
closeBtn.Font = Enum.Font.SourceSansBold
closeBtn.Text = "X"
closeBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
closeBtn.TextSize = 16

-- ========== FUNGSI UNTUK MENDETEKSI REMOTE CHAT ==========
local function cariRemoteChat()
    remoteStatus.Text = "üîç Mencari remote chat..."
    
    -- Method 1: Cek di ReplicatedStorage
    local replicatedStorage = game:GetService("ReplicatedStorage")
    
    -- Daftar kemungkinan nama remote yang umum
    local possibleRemotes = {
        -- Default Roblox
        replicatedStorage:FindFirstChild("DefaultChatSystemChatEvents") and 
            replicatedStorage.DefaultChatSystemChatEvents:FindFirstChild("SayMessageRequest"),
        replicatedStorage:FindFirstChild("ChatMessage"),
        replicatedStorage:FindFirstChild("SayMessageRequest"),
        
        -- Kemungkinan untuk Craft A World
        replicatedStorage:FindFirstChild("ChatRemote"),
        replicatedStorage:FindFirstChild("SendChat"),
        replicatedStorage:FindFirstChild("PlayerChatted"),
        replicatedStorage:FindFirstChild("Chat"),
        
        -- Cek di folder lain
        game:GetService("Players").LocalPlayer.PlayerGui:FindFirstChild("Chat") and 
            game:GetService("Players").LocalPlayer.PlayerGui.Chat:FindFirstChild("Remote"),
    }
    
    -- Coba cari remote yang valid
    for i, remote in ipairs(possibleRemotes) do
        if remote and remote:IsA("RemoteEvent") then
            chatRemote = remote
            remoteStatus.Text = "‚úÖ Remote ditemukan: " .. remote.Name
            remoteStatus.TextColor3 = Color3.fromRGB(0, 255, 0)
            print("‚úÖ Remote chat ditemukan:", remote:GetFullName())
            return true
        end
    end
    
    -- Method 2: Scan semua object di ReplicatedStorage
    remoteStatus.Text = "üîç Scan semua folder..."
    local function scanForRemote(folder, depth)
        if depth > 3 then return nil end
        for _, child in ipairs(folder:GetChildren()) do
            if child:IsA("RemoteEvent") and (
                string.find(string.lower(child.Name), "chat") or
                string.find(string.lower(child.Name), "message") or
                string.find(string.lower(child.Name), "say")
            ) then
                chatRemote = child
                remoteStatus.Text = "‚úÖ Remote ditemukan: " .. child.Name
                remoteStatus.TextColor3 = Color3.fromRGB(0, 255, 0)
                print("‚úÖ Remote chat ditemukan (scan):", child:GetFullName())
                return child
            end
            if child:IsA("Folder") or child:IsA("Configuration") then
                local found = scanForRemote(child, depth + 1)
                if found then return found end
            end
        end
    end
    
    chatRemote = scanForRemote(replicatedStorage, 1)
    
    if chatRemote then
        return true
    else
        remoteStatus.Text = "‚ùå Remote tidak ditemukan! Coba method alternatif."
        remoteStatus.TextColor3 = Color3.fromRGB(255, 0, 0)
        return false
    end
end

-- ========== FUNGSI SPAM DENGAN MULTI METHOD ==========
local function kirimPesan(pesan)
    -- Method 1: Pakai remote yang sudah ditemukan
    if chatRemote and chatRemote:IsA("RemoteEvent") then
        pcall(function()
            chatRemote:FireServer(pesan, "All")
        end)
        pcall(function()
            chatRemote:FireServer(pesan)
        end)
        pcall(function()
            chatRemote:FireServer(pesan, game:GetService("Players").LocalPlayer)
        end)
    end
    
    -- Method 2: Default Roblox Chat (fallback)
    pcall(function()
        local defaultChat = game:GetService("ReplicatedStorage"):FindFirstChild("DefaultChatSystemChatEvents")
        if defaultChat then
            local sayRequest = defaultChat:FindFirstChild("SayMessageRequest")
            if sayRequest then
                sayRequest:FireServer(pesan, "All")
            end
        end
    end)
    
    -- Method 3: Coba panggil fungsi chat langsung (untuk game tertentu)
    pcall(function()
        local chatService = game:GetService("Chat")
        if chatService then
            chatService:Chat(game:GetService("Players").LocalPlayer.Character, pesan)
        end
    end)
end

-- Fungsi mulai spam
local function startSpam()
    local pesan = pesanBox.Text
    local delay = tonumber(delayBox.Text)
    
    -- Validasi
    if pesan == "" then
        statusLabel.Text = "Pesan kosong!"
        return
    end
    
    if not delay or delay < 0.1 then
        statusLabel.Text = "Delay minimal 0.1"
        return
    end
    
    if spamActive then
        return
    end
    
    -- Cari remote dulu kalau belum ketemu
    if not chatRemote then
        cariRemoteChat()
    end
    
    spamActive = true
    statusLabel.Text = "Status: SPAM AKTIF"
    statusLabel.TextColor3 = Color3.fromRGB(0, 255, 0)
    runBtn.BackgroundColor3 = Color3.fromRGB(80, 80, 80)
    
    -- Loop spam
    spamThread = coroutine.create(function()
        while spamActive do
            kirimPesan(pesan)
            wait(delay)
        end
    end)
    coroutine.resume(spamThread)
end

-- Fungsi stop spam
local function stopSpam()
    if spamActive then
        spamActive = false
        statusLabel.Text = "Status: STOP"
        statusLabel.TextColor3 = Color3.fromRGB(255, 100, 100)
        runBtn.BackgroundColor3 = Color3.fromRGB(0, 150, 0)
    end
end

-- Event tombol
runBtn.MouseButton1Click:Connect(startSpam)
stopBtn.MouseButton1Click:Connect(stopSpam)
closeBtn.MouseButton1Click:Connect(function()
    stopSpam()
    screenGui:Destroy()
end)

-- Jalankan pencarian remote saat pertama kali load
wait(1)
cariRemoteChat()

-- Notifikasi
game:GetService("StarterGui"):SetCore("SendNotification", {
    Title = "Craft A World Spam",
    Text = "Script siap! Status remote akan muncul.",
    Duration = 3
})

print("‚úÖ Script Craft A World Spam siap digunakan!")
print("‚ÑπÔ∏è Status remote akan muncul di GUI")
